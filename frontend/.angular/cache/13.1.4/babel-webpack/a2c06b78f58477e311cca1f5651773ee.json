{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\Users\\\\59162\\\\Documents\\\\proyecto_angular\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport { Component, ViewChild } from '@angular/core';\nlet ExtraccionComponent = class ExtraccionComponent {\n  constructor(userservice) {\n    var _this = this;\n\n    this.userservice = userservice;\n    this.fileToUpload = null;\n    this.shortLink = \"\";\n    this.loading = false; // Flag variable    \n\n    this.datos_factura = {\n      name_empresa: '',\n      direccion: '',\n      telefono: '',\n      fecha_literal: '',\n      nit: '',\n      nombre_cliente: '',\n      valor_total_literal: '',\n      total_bruto: '',\n      total_descuento: '',\n      numero_item: '',\n      codigo_producto: '',\n      descripcion_producto: '',\n      udm: '',\n      cantidad_producto: '',\n      precio_unitario: '',\n      total_producto: '',\n      fecha_numerica: ''\n    };\n\n    this.loadingProgress = logger => {\n      console.log(logger);\n    };\n\n    this.initIa = /*#__PURE__*/_asyncToGenerator(function* () {\n      _this.carga = true; // const imageELement = this.inputImage!.nativeElement;\n      // const dataML = await recognize(imageELement,'spa', {\n      //   logger: m => this.loadingProgress(m)\n      // });\n      // console.log('fiinnn', dataML);\n    });\n\n    this.initSetup = () => {\n      const imageElement = this.inputImage.nativeElement;\n      const canvasElement = this.outputimage.nativeElement;\n      const {\n        naturalWidth,\n        naturalHeight\n      } = imageElement;\n      console.log(naturalWidth, naturalHeight);\n    };\n\n    this.pdfcargado = () => {\n      console.log('imagen lista');\n      this.initSetup(); // no se puede ver el width y el hegih sale unidefined\n    };\n  }\n\n  ngOnChanges(changes) {\n    throw new Error('Method not implemented.');\n  }\n\n  ngOnInit() {// this.obtenerdatosJson();\n  }\n\n  onChange(event) {\n    this.pdfcargado();\n  }\n\n  onChanged(event) {\n    this.pdfcargado();\n  }\n\n  ngAfterViewInit() {}\n\n  enviardata() {\n    if (this.file) {\n      this.loading = !this.loading;\n      this.userservice.obtenerdatosjson(this.file).subscribe(resp => {\n        // console.log(resp.output[0].fields.date.valueData.text);\n        this.datos_factura.name_empresa = resp.output[0].fields.name_empresa.valueData.text;\n        console.log(resp.output[0].fields.name_empresa.valueData.text);\n        this.datos_factura.direccion = resp.output[0].fields.direccion.valueData.text;\n        this.datos_factura.telefono = resp.output[0].fields.telefono.valueData.text;\n        this.datos_factura.fecha_literal = resp.output[0].fields.fecha_literal.valueData.text;\n        this.datos_factura.nit = resp.output[0].fields.nit.valueData.text;\n        this.datos_factura.nombre_cliente = resp.output[0].fields.nombre_cliente.valueData.text;\n        this.datos_factura.valor_total_literal = resp.output[0].fields.valor_total_literal.valueData.text;\n        this.datos_factura.total_bruto = resp.output[0].fields.total_bruto.valueData.text;\n        this.datos_factura.total_descuento = resp.output[0].fields.total_descuento.valueData.text;\n        this.datos_factura.numero_item = resp.output[0].fields.numero_item.valueData.text;\n        this.datos_factura.codigo_producto = resp.output[0].fields.codigo_producto.valueData.text;\n        this.datos_factura.descripcion_producto = resp.output[0].fields.descripcion_producto.valueData.text;\n        this.datos_factura.udm = resp.output[0].fields.udm.valueData.text;\n        this.datos_factura.cantidad_producto = resp.output[0].fields.cantidad_producto.valueData.text;\n        this.datos_factura.precio_unitario = resp.output[0].fields.precio_unitario.valueData.text;\n        this.datos_factura.total_producto = resp.output[0].fields.total_producto.valueData.text;\n        this.datos_factura.fecha_numerica = resp.output[0].fields.fecha_numerica.valueData.text; // resp.output[0].fields.fecha_numerica.valueData.value[i]['value']['valueData']['text']\n      });\n    } else {\n      alert(\"NO EXISTE UN ARCHIVO CARGADO!\");\n    }\n  }\n\n  handleFileInput(files) {\n    this.fileToUpload = files.item(0);\n  }\n\n};\n\n__decorate([ViewChild('inputImage')], ExtraccionComponent.prototype, \"inputImage\", void 0);\n\n__decorate([ViewChild('outputImage')], ExtraccionComponent.prototype, \"outputimage\", void 0);\n\nExtraccionComponent = __decorate([Component({\n  selector: 'app-extraccion',\n  templateUrl: './extraccion.component.html',\n  styleUrls: ['./extraccion.component.css']\n})], ExtraccionComponent);\nexport { ExtraccionComponent };","map":{"version":3,"sources":["C:/Users/59162/Documents/proyecto_angular/frontend/src/app/extraccion/extraccion.component.ts"],"names":["__decorate","Component","ViewChild","ExtraccionComponent","constructor","userservice","fileToUpload","shortLink","loading","datos_factura","name_empresa","direccion","telefono","fecha_literal","nit","nombre_cliente","valor_total_literal","total_bruto","total_descuento","numero_item","codigo_producto","descripcion_producto","udm","cantidad_producto","precio_unitario","total_producto","fecha_numerica","loadingProgress","logger","console","log","initIa","carga","initSetup","imageElement","inputImage","nativeElement","canvasElement","outputimage","naturalWidth","naturalHeight","pdfcargado","ngOnChanges","changes","Error","ngOnInit","onChange","event","onChanged","ngAfterViewInit","enviardata","file","obtenerdatosjson","subscribe","resp","output","fields","valueData","text","alert","handleFileInput","files","item","prototype","selector","templateUrl","styleUrls"],"mappings":";AAAA,SAASA,UAAT,QAA2B,OAA3B;AACA,SAASC,SAAT,EAAoBC,SAApB,QAAqC,eAArC;AACA,IAAIC,mBAAmB,GAAG,MAAMA,mBAAN,CAA0B;AAChDC,EAAAA,WAAW,CAACC,WAAD,EAAc;AAAA;;AACrB,SAAKA,WAAL,GAAmBA,WAAnB;AACA,SAAKC,YAAL,GAAoB,IAApB;AACA,SAAKC,SAAL,GAAiB,EAAjB;AACA,SAAKC,OAAL,GAAe,KAAf,CAJqB,CAIC;;AACtB,SAAKC,aAAL,GAAqB;AACjBC,MAAAA,YAAY,EAAE,EADG;AAEjBC,MAAAA,SAAS,EAAE,EAFM;AAGjBC,MAAAA,QAAQ,EAAE,EAHO;AAIjBC,MAAAA,aAAa,EAAE,EAJE;AAKjBC,MAAAA,GAAG,EAAE,EALY;AAMjBC,MAAAA,cAAc,EAAE,EANC;AAOjBC,MAAAA,mBAAmB,EAAE,EAPJ;AAQjBC,MAAAA,WAAW,EAAE,EARI;AASjBC,MAAAA,eAAe,EAAE,EATA;AAUjBC,MAAAA,WAAW,EAAE,EAVI;AAWjBC,MAAAA,eAAe,EAAE,EAXA;AAYjBC,MAAAA,oBAAoB,EAAE,EAZL;AAajBC,MAAAA,GAAG,EAAE,EAbY;AAcjBC,MAAAA,iBAAiB,EAAE,EAdF;AAejBC,MAAAA,eAAe,EAAE,EAfA;AAgBjBC,MAAAA,cAAc,EAAE,EAhBC;AAiBjBC,MAAAA,cAAc,EAAE;AAjBC,KAArB;;AAmBA,SAAKC,eAAL,GAAwBC,MAAD,IAAY;AAC/BC,MAAAA,OAAO,CAACC,GAAR,CAAYF,MAAZ;AACH,KAFD;;AAGA,SAAKG,MAAL,kCAAc,aAAY;AACtB,MAAA,KAAI,CAACC,KAAL,GAAa,IAAb,CADsB,CAEtB;AACA;AACA;AACA;AACA;AACH,KAPD;;AAQA,SAAKC,SAAL,GAAiB,MAAM;AACnB,YAAMC,YAAY,GAAG,KAAKC,UAAL,CAAgBC,aAArC;AACA,YAAMC,aAAa,GAAG,KAAKC,WAAL,CAAiBF,aAAvC;AACA,YAAM;AAAEG,QAAAA,YAAF;AAAgBC,QAAAA;AAAhB,UAAkCN,YAAxC;AACAL,MAAAA,OAAO,CAACC,GAAR,CAAYS,YAAZ,EAA0BC,aAA1B;AACH,KALD;;AAMA,SAAKC,UAAL,GAAkB,MAAM;AACpBZ,MAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACA,WAAKG,SAAL,GAFoB,CAEF;AACrB,KAHD;AAIH;;AACDS,EAAAA,WAAW,CAACC,OAAD,EAAU;AACjB,UAAM,IAAIC,KAAJ,CAAU,yBAAV,CAAN;AACH;;AACDC,EAAAA,QAAQ,GAAG,CACP;AACH;;AACDC,EAAAA,QAAQ,CAACC,KAAD,EAAQ;AACZ,SAAKN,UAAL;AACH;;AACDO,EAAAA,SAAS,CAACD,KAAD,EAAQ;AACb,SAAKN,UAAL;AACH;;AACDQ,EAAAA,eAAe,GAAG,CACjB;;AACDC,EAAAA,UAAU,GAAG;AACT,QAAI,KAAKC,IAAT,EAAe;AACX,WAAK3C,OAAL,GAAe,CAAC,KAAKA,OAArB;AACA,WAAKH,WAAL,CAAiB+C,gBAAjB,CAAkC,KAAKD,IAAvC,EAA6CE,SAA7C,CAAwDC,IAAD,IAAU;AAC7D;AACA,aAAK7C,aAAL,CAAmBC,YAAnB,GAAkC4C,IAAI,CAACC,MAAL,CAAY,CAAZ,EAAeC,MAAf,CAAsB9C,YAAtB,CAAmC+C,SAAnC,CAA6CC,IAA/E;AACA7B,QAAAA,OAAO,CAACC,GAAR,CAAYwB,IAAI,CAACC,MAAL,CAAY,CAAZ,EAAeC,MAAf,CAAsB9C,YAAtB,CAAmC+C,SAAnC,CAA6CC,IAAzD;AACA,aAAKjD,aAAL,CAAmBE,SAAnB,GAA+B2C,IAAI,CAACC,MAAL,CAAY,CAAZ,EAAeC,MAAf,CAAsB7C,SAAtB,CAAgC8C,SAAhC,CAA0CC,IAAzE;AACA,aAAKjD,aAAL,CAAmBG,QAAnB,GAA8B0C,IAAI,CAACC,MAAL,CAAY,CAAZ,EAAeC,MAAf,CAAsB5C,QAAtB,CAA+B6C,SAA/B,CAAyCC,IAAvE;AACA,aAAKjD,aAAL,CAAmBI,aAAnB,GAAmCyC,IAAI,CAACC,MAAL,CAAY,CAAZ,EAAeC,MAAf,CAAsB3C,aAAtB,CAAoC4C,SAApC,CAA8CC,IAAjF;AACA,aAAKjD,aAAL,CAAmBK,GAAnB,GAAyBwC,IAAI,CAACC,MAAL,CAAY,CAAZ,EAAeC,MAAf,CAAsB1C,GAAtB,CAA0B2C,SAA1B,CAAoCC,IAA7D;AACA,aAAKjD,aAAL,CAAmBM,cAAnB,GAAoCuC,IAAI,CAACC,MAAL,CAAY,CAAZ,EAAeC,MAAf,CAAsBzC,cAAtB,CAAqC0C,SAArC,CAA+CC,IAAnF;AACA,aAAKjD,aAAL,CAAmBO,mBAAnB,GAAyCsC,IAAI,CAACC,MAAL,CAAY,CAAZ,EAAeC,MAAf,CAAsBxC,mBAAtB,CAA0CyC,SAA1C,CAAoDC,IAA7F;AACA,aAAKjD,aAAL,CAAmBQ,WAAnB,GAAiCqC,IAAI,CAACC,MAAL,CAAY,CAAZ,EAAeC,MAAf,CAAsBvC,WAAtB,CAAkCwC,SAAlC,CAA4CC,IAA7E;AACA,aAAKjD,aAAL,CAAmBS,eAAnB,GAAqCoC,IAAI,CAACC,MAAL,CAAY,CAAZ,EAAeC,MAAf,CAAsBtC,eAAtB,CAAsCuC,SAAtC,CAAgDC,IAArF;AACA,aAAKjD,aAAL,CAAmBU,WAAnB,GAAiCmC,IAAI,CAACC,MAAL,CAAY,CAAZ,EAAeC,MAAf,CAAsBrC,WAAtB,CAAkCsC,SAAlC,CAA4CC,IAA7E;AACA,aAAKjD,aAAL,CAAmBW,eAAnB,GAAqCkC,IAAI,CAACC,MAAL,CAAY,CAAZ,EAAeC,MAAf,CAAsBpC,eAAtB,CAAsCqC,SAAtC,CAAgDC,IAArF;AACA,aAAKjD,aAAL,CAAmBY,oBAAnB,GAA0CiC,IAAI,CAACC,MAAL,CAAY,CAAZ,EAAeC,MAAf,CAAsBnC,oBAAtB,CAA2CoC,SAA3C,CAAqDC,IAA/F;AACA,aAAKjD,aAAL,CAAmBa,GAAnB,GAAyBgC,IAAI,CAACC,MAAL,CAAY,CAAZ,EAAeC,MAAf,CAAsBlC,GAAtB,CAA0BmC,SAA1B,CAAoCC,IAA7D;AACA,aAAKjD,aAAL,CAAmBc,iBAAnB,GAAuC+B,IAAI,CAACC,MAAL,CAAY,CAAZ,EAAeC,MAAf,CAAsBjC,iBAAtB,CAAwCkC,SAAxC,CAAkDC,IAAzF;AACA,aAAKjD,aAAL,CAAmBe,eAAnB,GAAqC8B,IAAI,CAACC,MAAL,CAAY,CAAZ,EAAeC,MAAf,CAAsBhC,eAAtB,CAAsCiC,SAAtC,CAAgDC,IAArF;AACA,aAAKjD,aAAL,CAAmBgB,cAAnB,GAAoC6B,IAAI,CAACC,MAAL,CAAY,CAAZ,EAAeC,MAAf,CAAsB/B,cAAtB,CAAqCgC,SAArC,CAA+CC,IAAnF;AACA,aAAKjD,aAAL,CAAmBiB,cAAnB,GAAoC4B,IAAI,CAACC,MAAL,CAAY,CAAZ,EAAeC,MAAf,CAAsB9B,cAAtB,CAAqC+B,SAArC,CAA+CC,IAAnF,CAnB6D,CAoB7D;AACH,OArBD;AAsBH,KAxBD,MAyBK;AACDC,MAAAA,KAAK,CAAC,+BAAD,CAAL;AACH;AACJ;;AACDC,EAAAA,eAAe,CAACC,KAAD,EAAQ;AACnB,SAAKvD,YAAL,GAAoBuD,KAAK,CAACC,IAAN,CAAW,CAAX,CAApB;AACH;;AA7F+C,CAApD;;AA+FA9D,UAAU,CAAC,CACPE,SAAS,CAAC,YAAD,CADF,CAAD,EAEPC,mBAAmB,CAAC4D,SAFb,EAEwB,YAFxB,EAEsC,KAAK,CAF3C,CAAV;;AAGA/D,UAAU,CAAC,CACPE,SAAS,CAAC,aAAD,CADF,CAAD,EAEPC,mBAAmB,CAAC4D,SAFb,EAEwB,aAFxB,EAEuC,KAAK,CAF5C,CAAV;;AAGA5D,mBAAmB,GAAGH,UAAU,CAAC,CAC7BC,SAAS,CAAC;AACN+D,EAAAA,QAAQ,EAAE,gBADJ;AAENC,EAAAA,WAAW,EAAE,6BAFP;AAGNC,EAAAA,SAAS,EAAE,CAAC,4BAAD;AAHL,CAAD,CADoB,CAAD,EAM7B/D,mBAN6B,CAAhC;AAOA,SAASA,mBAAT","sourcesContent":["import { __decorate } from \"tslib\";\r\nimport { Component, ViewChild } from '@angular/core';\r\nlet ExtraccionComponent = class ExtraccionComponent {\r\n    constructor(userservice) {\r\n        this.userservice = userservice;\r\n        this.fileToUpload = null;\r\n        this.shortLink = \"\";\r\n        this.loading = false; // Flag variable    \r\n        this.datos_factura = {\r\n            name_empresa: '',\r\n            direccion: '',\r\n            telefono: '',\r\n            fecha_literal: '',\r\n            nit: '',\r\n            nombre_cliente: '',\r\n            valor_total_literal: '',\r\n            total_bruto: '',\r\n            total_descuento: '',\r\n            numero_item: '',\r\n            codigo_producto: '',\r\n            descripcion_producto: '',\r\n            udm: '',\r\n            cantidad_producto: '',\r\n            precio_unitario: '',\r\n            total_producto: '',\r\n            fecha_numerica: ''\r\n        };\r\n        this.loadingProgress = (logger) => {\r\n            console.log(logger);\r\n        };\r\n        this.initIa = async () => {\r\n            this.carga = true;\r\n            // const imageELement = this.inputImage!.nativeElement;\r\n            // const dataML = await recognize(imageELement,'spa', {\r\n            //   logger: m => this.loadingProgress(m)\r\n            // });\r\n            // console.log('fiinnn', dataML);\r\n        };\r\n        this.initSetup = () => {\r\n            const imageElement = this.inputImage.nativeElement;\r\n            const canvasElement = this.outputimage.nativeElement;\r\n            const { naturalWidth, naturalHeight } = imageElement;\r\n            console.log(naturalWidth, naturalHeight);\r\n        };\r\n        this.pdfcargado = () => {\r\n            console.log('imagen lista');\r\n            this.initSetup(); // no se puede ver el width y el hegih sale unidefined\r\n        };\r\n    }\r\n    ngOnChanges(changes) {\r\n        throw new Error('Method not implemented.');\r\n    }\r\n    ngOnInit() {\r\n        // this.obtenerdatosJson();\r\n    }\r\n    onChange(event) {\r\n        this.pdfcargado();\r\n    }\r\n    onChanged(event) {\r\n        this.pdfcargado();\r\n    }\r\n    ngAfterViewInit() {\r\n    }\r\n    enviardata() {\r\n        if (this.file) {\r\n            this.loading = !this.loading;\r\n            this.userservice.obtenerdatosjson(this.file).subscribe((resp) => {\r\n                // console.log(resp.output[0].fields.date.valueData.text);\r\n                this.datos_factura.name_empresa = resp.output[0].fields.name_empresa.valueData.text;\r\n                console.log(resp.output[0].fields.name_empresa.valueData.text);\r\n                this.datos_factura.direccion = resp.output[0].fields.direccion.valueData.text;\r\n                this.datos_factura.telefono = resp.output[0].fields.telefono.valueData.text;\r\n                this.datos_factura.fecha_literal = resp.output[0].fields.fecha_literal.valueData.text;\r\n                this.datos_factura.nit = resp.output[0].fields.nit.valueData.text;\r\n                this.datos_factura.nombre_cliente = resp.output[0].fields.nombre_cliente.valueData.text;\r\n                this.datos_factura.valor_total_literal = resp.output[0].fields.valor_total_literal.valueData.text;\r\n                this.datos_factura.total_bruto = resp.output[0].fields.total_bruto.valueData.text;\r\n                this.datos_factura.total_descuento = resp.output[0].fields.total_descuento.valueData.text;\r\n                this.datos_factura.numero_item = resp.output[0].fields.numero_item.valueData.text;\r\n                this.datos_factura.codigo_producto = resp.output[0].fields.codigo_producto.valueData.text;\r\n                this.datos_factura.descripcion_producto = resp.output[0].fields.descripcion_producto.valueData.text;\r\n                this.datos_factura.udm = resp.output[0].fields.udm.valueData.text;\r\n                this.datos_factura.cantidad_producto = resp.output[0].fields.cantidad_producto.valueData.text;\r\n                this.datos_factura.precio_unitario = resp.output[0].fields.precio_unitario.valueData.text;\r\n                this.datos_factura.total_producto = resp.output[0].fields.total_producto.valueData.text;\r\n                this.datos_factura.fecha_numerica = resp.output[0].fields.fecha_numerica.valueData.text;\r\n                // resp.output[0].fields.fecha_numerica.valueData.value[i]['value']['valueData']['text']\r\n            });\r\n        }\r\n        else {\r\n            alert(\"NO EXISTE UN ARCHIVO CARGADO!\");\r\n        }\r\n    }\r\n    handleFileInput(files) {\r\n        this.fileToUpload = files.item(0);\r\n    }\r\n};\r\n__decorate([\r\n    ViewChild('inputImage')\r\n], ExtraccionComponent.prototype, \"inputImage\", void 0);\r\n__decorate([\r\n    ViewChild('outputImage')\r\n], ExtraccionComponent.prototype, \"outputimage\", void 0);\r\nExtraccionComponent = __decorate([\r\n    Component({\r\n        selector: 'app-extraccion',\r\n        templateUrl: './extraccion.component.html',\r\n        styleUrls: ['./extraccion.component.css']\r\n    })\r\n], ExtraccionComponent);\r\nexport { ExtraccionComponent };\r\n"]},"metadata":{},"sourceType":"module"}